let TOKEN_KEY = 'TOKEN_KEY';

let TOKEN_TIME = 86400 * 1000 * 3;

interface StorageType {
  time: number;
  token: string;
}

export function getToken() {
  let item: string | null = localStorage.getItem(TOKEN_KEY);
  if (item) {
    let storage: StorageType = JSON.parse(item);
    let time: number = new Date().getTime();
    if (storage.time + TOKEN_TIME < time && storage.token) {
      return storage.token;
    }
  }
}

export function setToken(token: string, time: number = TOKEN_TIME) {
  localStorage.setItem(
    TOKEN_KEY,
    JSON.stringify({
      token: token,
      time: time
    })
  );
}

export function removeToken() {
  localStorage.removeItem(TOKEN_KEY);
}
